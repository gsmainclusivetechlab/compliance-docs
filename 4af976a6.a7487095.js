(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{61:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return s})),n.d(t,"metadata",(function(){return c})),n.d(t,"rightToc",(function(){return o})),n.d(t,"default",(function(){return u}));var a=n(2),r=n(6),i=(n(0),n(74)),s={title:"Test Case Matching",sidebar_label:"Test Case Matching"},c={unversionedId:"architecture/matching",id:"architecture/matching",isDocsHomePage:!1,title:"Test Case Matching",description:"A single testing session will contain tests for multiple use cases, each of",source:"@site/docs/architecture/matching.mdx",slug:"/architecture/matching",permalink:"/architecture/matching",editUrl:"https://github.com/gsmainclusivetechlab/interop-docs/blob/develop/docs/architecture/matching.mdx",version:"current",sidebar_label:"Test Case Matching",sidebar:"someSidebar",previous:{title:"Overview",permalink:"/architecture/overview"},next:{title:"ITP Use Cases",permalink:"/testcases/intro"}},o=[{value:"Test Triggers",id:"test-triggers",children:[]},{value:"Identical Requests",id:"identical-requests",children:[]}],l={rightToc:o};function u(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("p",null,"A single testing session will contain tests for multiple use cases, each of\nwhich may contain multiple test cases. This is useful for rapid testing under a\nvariety of conditions, but means the platform must automatically identify which\ntest case is being executed when a request arrives at the platform. For example,\na session may contain two flows which differ only in whether a quote is accepted\nor rejected by a remote DFSP. In this case, the test platform must identify\nwhich flow is being executed, in order validate the requests and instruct the\nremote DFSP simulator to accept or reject the quote."),Object(i.b)("p",null,"For every test case within the session, the first unmatched step is selected to\ncompare against the incoming request. For test cases which have not yet been\nstarted, the very first step of the test case is selected. First, the request's\nbasic characteristics are considered to determine which of the test steps may\nmatch. These characteristics are:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"The request ",Object(i.b)("strong",{parentName:"li"},"method")," (",Object(i.b)("inlineCode",{parentName:"li"},"GET"),", ",Object(i.b)("inlineCode",{parentName:"li"},"POST"),", ",Object(i.b)("inlineCode",{parentName:"li"},"PUT"),", etc)"),Object(i.b)("li",{parentName:"ul"},"The request ",Object(i.b)("strong",{parentName:"li"},"path")," (",Object(i.b)("inlineCode",{parentName:"li"},"/transactions"),", ",Object(i.b)("inlineCode",{parentName:"li"},"/batchtransactions/{batchId}"),")"),Object(i.b)("li",{parentName:"ul"},"The request ",Object(i.b)("strong",{parentName:"li"},"source and destination components")," (",Object(i.b)("inlineCode",{parentName:"li"},"Mobile Money API Provider"),",\n",Object(i.b)("inlineCode",{parentName:"li"},"Service Provider"),")")),Object(i.b)("p",null,"It is frequently the case that multiple test steps will still be possible\nmatches at this stage, since many test cases test fairly similar flows. In the\nexample given above for example, these characteristics would be identical for\nboth the accepted and rejected cases, since both follow the same basic flow of\nrequests. To disambiguate between them, a further check is required, known as\ntest ",Object(i.b)("em",{parentName:"p"},"triggers"),"."),Object(i.b)("h2",{id:"test-triggers"},"Test Triggers"),Object(i.b)("p",null,"A test trigger takes the form of a JSON object which must be present within the\nbody of a request for it to match against the test step. For example, a test\nstep might be defined with a trigger of:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{ "amount": 20.03 }\n')),Object(i.b)("p",null,"If a request arrives at the platform with a body containing the following, the\ntest case would be considered a match:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n  "payerid": { "type": "MSISDN", "id": "123456789" },\n  "amount": 20.03,\n  "currency": "EUR"\n}\n')),Object(i.b)("p",null,"However, a request with this body would not be considered a match:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n  "payerid": { "type": "MSISDN", "id": "123456789" },\n  "amount": 20.04,\n  "currency": "EUR"\n}\n')),Object(i.b)("p",null,"In this way, multiple test cases can be defined unambiguously while sharing\nalmost identical flows. Returning to the example above, the accepted case may be\ndefined with a trigger of ",Object(i.b)("inlineCode",{parentName:"p"},'{"amount": 20.03}')," while the rejected case is defined\nwith a trigger of ",Object(i.b)("inlineCode",{parentName:"p"},'{"amount": 20.04}'),". The two test cases can then be executed\nin any order (or even simultaneously) with no conflict between them."),Object(i.b)("h2",{id:"identical-requests"},"Identical Requests"),Object(i.b)("p",null,"In the case that neither the request body nor the request path contain any data\nwhich may be used as a trigger, it is not currently possible to disambiguate any\nfurther. As a result, it is not possible to execute multiple test cases\nsimultaneously, since the platform will not be able to determine which test case\nis under execution."),Object(i.b)("p",null,"To allow testing such similar scenarios, ITP defines an option\n",Object(i.b)("inlineCode",{parentName:"p"},"FORCE_SEQUENTIAL_TESTS"),' which is false by default. When the option is enabled,\ntest executions are expected to be sequential - so a single session should never\nhave two parallel test runs. By making this assumption, it becomes possible to\nunambiguously select one of several identical test cases by simply clicking the\n"Run Test Case" button for the desired test case. This will initiate the test\ncase execution, and any requests received by the platform will be automatically\nmatched to the current test case until the test run is complete.'))}u.isMDXComponent=!0},74:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return d}));var a=n(0),r=n.n(a);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=r.a.createContext({}),u=function(e){var t=r.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},b=function(e){var t=u(e.components);return r.a.createElement(l.Provider,{value:t},e.children)},h={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},p=r.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,l=o(e,["components","mdxType","originalType","parentName"]),b=u(n),p=a,d=b["".concat(s,".").concat(p)]||b[p]||h[p]||i;return n?r.a.createElement(d,c(c({ref:t},l),{},{components:n})):r.a.createElement(d,c({ref:t},l))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,s=new Array(i);s[0]=p;var c={};for(var o in t)hasOwnProperty.call(t,o)&&(c[o]=t[o]);c.originalType=e,c.mdxType="string"==typeof e?e:a,s[1]=c;for(var l=2;l<i;l++)s[l]=n[l];return r.a.createElement.apply(null,s)}return r.a.createElement.apply(null,n)}p.displayName="MDXCreateElement"}}]);